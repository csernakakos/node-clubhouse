extends base

block content
    h2
        | Welcome
        if isLoggedIn
            span.highlight , #{username}
        | !

    if isLoggedIn
        p 
        a.new-message(href="/new-message") Post a message 
    else
        p You are not logged in. You can still see messages, but you won't see who created them and when.
    
    div.messages
        if messages.length
            each message in messages
                div.message
                    if isAdmin
                        form.form(action=`/messages/${message._id}` method="POST")
                            button.delete
                                a.button.delete Delete
                    h3.title #{message.title}
                    if membershipStatus === "privilegedUser"
                        h4.timestamp 
                            | Posted on 
                            = message.createdAt.toLocaleString("en-us", {year: "numeric", month: "long", day: "numeric"})
                            | .
                        if message.createdBy
                            h4.createdBy
                                | Posted by 
                                span.createdBy= message.createdBy.username
                    p.body #{message.body}
        if !messages.length && isLoggedIn
            p.emptyState 
                | It's quiet in here. Why not 
                a.new-message(href="/new-message") post a message 
                | ?
        if !messages.length && !isLoggedIn
            p.emptyState Sign up or log in to start posting messages.
    
